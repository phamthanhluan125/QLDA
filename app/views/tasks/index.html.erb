<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header" data-background-color="purple">
          <h4 class="title">DANH SÁCH TASK</h4>
          <p class="category">Xem thông tin task, thêm mớim, theo dõi tiến độ</p>
        </div>
        <div class="card-content table-responsive">
          <div class="row">
            <div class="col-md-3 text-center">
              <%= link_to "Thêm task mới", "#modal-new-task", "data-toggle": "modal",
                class: "#{check_btn_edit @choose_project} btn btn-success form-group" %>
            </div>
            <div class="col-md-9">
              <div class="form-group label-floating is-empty">
                <label>Chọn dự án</label>
                <%= select_tag "choose-project", options_from_collection_for_select(@projects, :id, :name, @choose_project.id), class: "form-control choose-project", "data-type": "task" %>
                <span class="material-input"></span>
              </div>
            </div>

          </div>
          <div class="material-datatables">
             <table id="datatables" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
              <thead class="text-primary">
                <tr>
                  <th>Tên</th>
                  <th>Mô tả</th>
                  <th>Ngày bắt đầu</th>
                  <th>Deadline</th>
                  <th>Số nhân viên</th>
                  <th>Trạng thái</th>
                  <th>Chức năng</th>
                </tr>
              </thead>
              <tbody>
                <%= render partial: "task", collection: @tasks %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<%= form_for Task.new, url: tasks_path do |f| %>
<%= f.hidden_field :project_id, value: @choose_project.id %>
<div class="modal fade" id="modal-new-task">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Thêm task mới</h4>
      </div>
      <div class="modal-body">
        <div class="card">
          <div class="card-content">
            <div class="col-md-12">
              <div class="row">
                <div class="col-md-12">
                  <div class="form-group label-floating is-empty">
                    <label class="control-label">Tên</label>
                    <%= f.text_field :name, maxlength: 3000, minlength: 6, required: true,
                      class: "form-control" %>
                    <span class="material-input"></span>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <div class="form-group label-floating is-empty">
                    <label class="control-label">Mô tả</label>
                    <%= f.text_area :info, maxlength: 3000, minlength: 6, class: "form-control" %>
                    <span class="material-input"></span>
                  </div>
                </div>
              </div>

              <div class="row">
                <%= hidden_field "", "", data: {start: l(@choose_project.start_date),
                  end: l(@choose_project.deadline), name: "dự án"}, class: "limit-time" %>
                <div class="col-md-6">
                  <div class="form-group label-floating is-empty">
                    <label class="control-label">Thời gian bắt đầu</label>
                    <%= f.text_field :start_date, required: true, class: "date date-start form-control" %>
                    <span class="material-input"></span>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group label-floating is-empty">
                    <label class="control-label">Deadline</label>
                    <%= f.text_field :deadline, required: true, class: "date date-end form-control" %>
                    <span class="material-input"></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <%= link_to "Hủy", "javascript:", class: "btn btn-default", "data-dismiss": "modal" %>
        <%= f.submit "Thêm", class: "btn btn-primary" %>
      </div>
    </div>
  </div>
</div>
<% end %>
